async function updateElementsBase(){var e=document.querySelectorAll("[click]"),t=document.querySelectorAll("[enter]"),o=document.querySelectorAll("[leave]");e.forEach(e=>{const t=e.getAttribute("to");t&&(e.addEventListener("click",()=>{setSPAContent(t)}),e.removeAttribute("to"),e.removeAttribute("click"))}),t.forEach(e=>{const t=e.getAttribute("to");t&&e.addEventListener("mouseenter",()=>{setSPAContent(t)})}),o.forEach(e=>{const t=e.getAttribute("to");t&&e.addEventListener("mouseleave",()=>{setSPAContent(t)})})}async function reloadScripts(){const e=document.querySelectorAll("script[src]");for(const t of e){const e=t.src,o=await fetch(e,{mode:"no-cors"});if(o.ok){const e=await o.text(),n=document.createElement("script");n.textContent=e,t.parentNode.replaceChild(n,t)}else console.error("Fa1iled to load script:",e)}}async function setSPAContent(e){let t=await fetch(e);var o="";t.ok&&(o=await t.text(),newhtml=document.createElement("html"),newhtml.innerHTML=o,document.documentElement.replaceWith(newhtml),window.history.pushState({},e.split(window.origin),e),updateElementsBase(),reloadScripts())}new MutationObserver(e=>{for(const t of e)updateElementsBase()}).observe(document.body,{childList:!0,attributes:!0,subtree:!0});
