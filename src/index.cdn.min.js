const observer=new MutationObserver(e=>{for(const t of e)updateElementsBase()});async function updateElementsBase(){var e=document.querySelectorAll("[click]"),t=document.querySelectorAll("[enter]"),n=document.querySelectorAll("[leave]");e.forEach(e=>{const t=e.getAttribute("to");t&&(e.addEventListener("click",()=>{setSPAContent(t)}),e.removeAttribute("to"),e.removeAttribute("click"))}),t.forEach(e=>{const t=e.getAttribute("to");t&&e.addEventListener("mouseenter",()=>{setSPAContent(t)})}),n.forEach(e=>{const t=e.getAttribute("to");t&&e.addEventListener("mouseleave",()=>{setSPAContent(t)})})}async function setSPAContent(e){let t=await fetch(e);var n="";t.ok&&(n=await t.text(),newhtml=document.createElement("html"),newhtml.innerHTML=n,document.documentElement.replaceWith(newhtml),window.history.pushState({},e.split(window.origin),e),updateElementsBase())}observer.observe(document.body,{childList:!0,attributes:!0,subtree:!0});
